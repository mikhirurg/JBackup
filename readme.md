В рамках данной лабораторной работы было необходимо разработать систему,
управляющую процессом создания бэкапов. Необходимо было реализовать
функционал создания точек восстановления двух видов, а также поддержать разные
алгоритмы хранения бекапов. Кроме того, необходимо было реализовать алгоритмы
очистки точек восстановления. Я разработал систему, решающую поставленную
задачу.

Для работы с бэкапами был разработан класс **BackupManager**, позволяющий
создавать бэкапы, точки восстановления, а также сохранять хранимые в бэкапах
данные.

Для представления объектов типа “Бэкап” был разработан класс **Backup**. Внутри
данного класса хранится текущий активный список файлов, список точек
восстановления, id и имя бекапа. Также в классе бекапа присутствуют два
функциональных объекта: **FileSaver** и **CleaningAlgorithm**. Данные объекты отвечают
соответственно за алгоритм сохранения бэкапа и за стратегию очистки точек
восстановления.

Класс Backup предоставляет функционал сохранения хранящихся в нем точек
восстановления, создания точек восстановления двух типов (полная и
инкрементальная), добавления и удаления файлов, а также получения списка
хранимых в бэкапе файлов и получения объема хранимых данных.
В Бэкапах реализована возможность создавать точки восстановления. 

Для представления объектов типа “точка восстановления” был создан абстрактный класс
**RestorePoint** и два наследника **FullRestorePoint** и **IncrementalRestorePoint**.
В классе **RestorePoint** предусматривается функционал получения: списка файлов в
точке восстановления, объёма хранимых данных, даты создания, названия точки
восстановления, типа точки восстановления. Также есть функционал генерации текста
с информацией о точке восстановления, а также метод, реализующий функционал
обновления списка файлов при “движении” по списку точек восстановления.

- Класс **IncrementalRestorePoint** реализует функционал инкрементальной точки
    восстановления. В данном классе хранится список файлов, которые нужно
    добавить к предыдущей цепочке, и список файлов, которые нужно удалить.
- Класс ​ **FullRestorePoint** реализует функционал полной точки восстановления. В
    данном классе хранится весь список файлов, которые хранились в бекапе в
    момент создания точки.
    
Для поддержания сохранения файлов бекапа были разработаны классы,
позволяющие реализовывать различные алгоритмы сохранения. Был создан
абстрактный класс **FileSaver** и два наследника **DirectorySaver** и **ArchiveSaver**.
В классе **FileSaver** предусматривается функционал сохранения информации,
находящейся в бекапе.

- Класс **DirectorySaver** осуществляет сохранение информации бекапа внутри
    директории.
- Класс **ArchiveSaver** осуществляет сохранение информации бекапа внутри
    архива.

Для реализации алгоритмов очистки точек восстановления был разработан класс
**CleaningAlgorithm** . Данный класс использует паттерн билдер при создании класса.
Класс позволяет установить ограничение по: объему занимаемых данных, количеству
точек, а также ограничение по минимальной дате создания точки восстановления. В
дальнейшем объект применяется для очищения точек восстановления при
добавлении в бэкап новых точек.
Для кэширование информации о хранимых в инкрементальных точках файлах был
создан класс **FileInfo**, который хранит объем файла на момент сохранения точки и
путь до файла.

Чтобы реализовать механизм “путешествия во времени”, мной был разработан класс
**FixtureUtils**, в котором содержатся статические классы для тестирования
работоспособности системы. Для тестирования корректности работы системы во
времени, был создан статический класс **Time**. Данный класс предоставляет
возможность задать свое текущее время для системы. Это позволяет протестировать
алгоритмы очистки точек, в которых установлены лимиты по времени.

Для сигнализировании об ошибках, возникающих в процессе работы системы был
разработан ряд классов-исключений:
- JBackupException - абстрактный класс исключений, которые могут возникнуть
при работе с данными классами.
- FileNotInBackupException - сигнализирует о том что была попытка обращения к
несуществующему в бекапе файлу.
- NoFullRestoreException - сигнализирует о том что невозможно создание
инкрементальной точки восстановления, поскольку в списке всех точек
отсутствует полная тока восстановления.
- BackupNotExistsException - сигнализирует о том что в процессе работы с
системой управления бэкапами была попытка обращения к несуществующему
бэкапу.

Таким образом, мной была разработана система, позволяющая управлять созданием
бэкапов и точек восстановления. Данная система позволяет установить необходимый
алгоритм очистки точек восстановления и стратегию сохранения файлов. Система
была проверена на работоспособность посредством написания тестов, реализующих
описанные в условии юз-кейсы.


